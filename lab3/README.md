# Медиаплеер

---

В ходе лабораторной работы №3 был разработан медиаплеер, который работат как с аудио, так и с видео. 

Для начала пользователь выбирает файлы для воспроизведения, затем он может с ними взаимодействовать: свайпами вправо и влево переходить к следующей/предыдущей компазиции, перематывать на 10 секунд,останавливать.


Для этого было решено использовать _фрагменты_ и компонент _ViewPager2_.
Для компонента был написан собственный адаптер FragmentAdapter, работающий со списком фрагментов.
Необходимо было реализовать разные функции у фрагментов видео и аудио. Для этого
был создан класс-родитель PageFragment (реализует класс Fragment), экземпляры которого хранит адаптер, и классы-наследники
PageAudioFragment  и PageVideoFragment, 
которые уже непосредственно реализуют методы родительского PageFragment.

Все фрагменты автоматически воспроизводят медиа, по свайпу предыдущий останавливается, 
а следующий начинает воспроизводиться. Данные позиции сохраняются, поэтому по свайпу назад
начинается воспроизведение с остановленного момента у предыдущего.

Audio
---

Для возможности воспроизводить аудио в фоновом режиме, оно воспроизводится сразу в службе 
MediaService.
Одновременно с этим показывается уведомление о проигрываемом файле.
Уведомление также содержит _кнопку_, которая останавливает музыку.
За управление уведомлением и кнопкой отвечает класс NotificationHandler.
Он создает уведомление и запускает службу отслеживания этой кнопки (служба NotificationActionService, описанная внутри этого класса), 
которая прекращает воспроизведение.

---
Video
---
Для работы с видео использовался компонент _VideoView_.
Для воспроизведения достаточно передать ему Uri файла. Для плей/паузы, 
перемотки использовался встроенный компонент _MediaController_. 
Возникло желание переопределить его добавить кнопку для полного экрана 
и обработчик ее нажатия. Это реализовано в классе CustomMediaController
За полный экран отвечает FullScreenActivity.
Режим по умолчанию открывается в landscape ориентации.

В качестве эксклюзивной опции в полноэкранном режиме реализована 
промотка +-10 сек по _двойному клику_ в соответствующей части экрана.

Текущая позиция в видео не теряется при переходе в полный экран и обратно.



---
Audio
---

Для возможности воспроизводить аудио в фоновом режиме, оно воспроизводится сразу в службе 
MediaService.
Одновременно с этим показывается уведомление о проигрываемом файле.
Уведомление также содержит _кнопку_, которая останавливает музыку.
За управление уведомлением и кнопкой отвечает класс NotificationHandler.
Он создает уведомление и запускает службу отслеживания этой кнопки (служба NotificationActionService, описанная внутри этого класса), 
которая прекращает воспроизведение.

---

Приложение имеет русскую локализацию.
### Приложение в работе можно посмотреть на [видео](./video.mp4).

---
